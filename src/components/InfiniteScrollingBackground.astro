---
// Import any required scripts or styles here if necessary
---

<canvas id="demo"></canvas>
<style>
  canvas {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    contain: strict;
    display: block;
  }
</style>
<script>
  // import { InfiniteScrollingBackground } from '../scripts/InfiniteScrollingBackgronud';
  // // 页面加载完成后初始化背景滚动
  // window.addEventListener('load', () => {
  //   new InfiniteScrollingBackground('scrollCanvas', '/favicon.svg');
  // });
  const fruits = ["🍇", "🍈", "🍉", "🍊", "🍋", "🍋‍🟩", "🍌", "🍍"];
  const vh = window.innerHeight / 100;
  const vw = window.innerWidth / 100;
  const verticalLine = [0, 20 * vh, 40 * vh, 60 * vh, 80 * vh];
  const canvas = document.querySelector("#demo") as HTMLCanvasElement;
  canvas.width = 100 * vw;
  canvas.height = 100 * vh;
  const ctx = canvas.getContext("2d") as CanvasRenderingContext2D;
  function drawOne(item: string, x: number, y: number) {
    ctx.font = "15vh Arial"; // 设置字体大小和类型
    ctx.textBaseline = "top"; // 设置文本基线
    ctx?.fillText(item, x, y);
  }
  function drawRect(x, y) {
    ctx?.fillRect(x, y, 15 * vh, 15 * vh);
  }
  function drawAll() {
    for (let i = 0; i < 5; i++) {
      fruits.forEach((item, idx) =>
        drawOne(item, 22 * idx * vh, 4 * vh + verticalLine[i])
      );
    }
  }
  for (let i = 0; i < 5; i++) {
    fruits.forEach((item, idx) =>
      drawRect(22 * idx * vh, 2.5 * vh + verticalLine[i])
    );
  }

  const scrollBg = document.querySelector("#scrollBg") as HTMLDivElement;
  console.log(scrollBg);
  scrollBg.addEventListener("scroll", (e) => {
    console.log("scroll", scrollBg.scrollLeft);
    const scrolledPixels = scrollBg.scrollLeft * 0.01;
    const x = (scrolledPixels % 22) * vh;
    ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
    for (let i = 0; i < 5; i++) {
      fruits.forEach((item, idx) =>
        drawRect(22 * idx * vh-x, 2.5 * vh + verticalLine[i])
      );
    }
  });
</script>
